<!DOCTYPE html>

<!--
    collapsible directed acyclical graph for family tree visualization
    author: Deepak Rayamajhi
    license: GNU General Public License v3.0

	code from https://github.com/BenPortner/js_family_tree
    based on d3 collapsible treemap example by d3noob: https://bl.ocks.org/d3noob/43a860bc0024792f8803bba8ca0d5ecd
    features in the original:
    - d3 tree
    - collapsible
    - transitions
    new features:
    - two types of nodes: unions and persons
    - d3 dag instead of tree (to allow two parents per union)
    - collapse/expand in all directions (memory function)
    - tooltips: show node metadata on hover
-->

<head>
    <meta charset="UTF-8">	
	<meta name="description" content="Family Tree of Rayamajhi">
	<meta name="keywords" content="Rayamajhi, Family Tree, Genealogy, Nepal, Kathmandu, Gulmi, USA Nepali Family, USA Rayamajhi Family, Nepali">
	<meta name="author" content="Deepak Rayamajhi">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Rayamajhi Family Genealogy</title>

	
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/select2/3.5.0/select2.min.js"></script>
	<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/select2/3.5.0/select2.min.css"></link>
	
	<link rel="stylesheet" href="css/search.css">
    <link rel="stylesheet" href="css/main1.css">	
</head>

<body>   	
		
	<div id="block_container">	
		<div id="bloc2">		
		<div class="header">Rayamajhi Family Tree</div>
		</div>	
	
		<div id="bloc1">		
		<form action="" class="search-bar">
		  <input type="search" id="searchItem" name="search" placeholder="Search Name">
		  <button class="search-btn" type="submit" onclick="switchMainNode()" >			
		   <span>Search</span>
		  </button>
		 
		</form>
		
	
		</div>
		
		<div id="peopledata" class="dropdown_menu">	</div>	

		
	
	</div>
				
	<script src="https://d3js.org/d3.v7.min.js"></script>
	<script src="js/d3-dag.js"></script>
	<script src="data/data_Sample.js"></script>
	<script src="js/familytree.js"></script>
	

	 <script>
					
		// insert svg object to hold the family tree
		const svg = d3.select("body").append("svg")
			.attr("width", document.body.offsetWidth)
			.attr("height", document.documentElement.clientHeight);	
		
		var FT = new FamilyTree(data, svg);
		
		FT.draw();	
				
		var selectStartNode = localStorage.getItem("mainNodeKey");			
		FT.load_data(selectStartNode);
	
		function switchMainNode(){				
			var selectStartNode =document.getElementById("searchItem").value;
			var flag=false;				
			
			for (var d in data.persons) {
				if (data.persons[d].name.toLowerCase()===selectStartNode.toLowerCase()) {					
				flag=true;
				selectStartNode=d;
				break;
				}			
			}
			
			if (flag==true) {
				localStorage.setItem("mainNodeKey", selectStartNode);	
			} else {
				alert("Name not found! Try using first name only. For Daughter use input as name(Daughter)"); 
				selectStartNode="HemantUnknUnkn";
				localStorage.setItem("mainNodeKey", "HemantUnknUnkn");	
			}

		}
		
		const countriesData = {
				  "results": [
					{
					  "id": 1,
					  "text": "Option 1"
					},
					{
					  "id": 2,
					  "text": "Option 2"
					},
					{
					  "id": 3,
					  "text": "Option 3"
					},
					{
					  "id": 4,
					  "text": "Option 4"
					},
					{
					  "id": 5,
					  "text": "Option 5"
					}
				  ]
				};
		
		$("#peopledata").select2({
			data: countriesData,
			containerCssClass: "peopledata"
		});
		
		$("#search").on("select2-selecting", function(e) {
		<!-- var paths = searchTree(root,e.object.text,[]); -->
		<!-- if(typeof(paths) !== "undefined"){ -->
			<!-- openPaths(paths); -->
		<!-- } -->
		<!-- else{ -->
			<!-- alert(e.object.text+" not found!"); -->
		<!-- } -->
		alert(e.object.text);
		
	});
		
		
		//$('#mySelect2').find(':selected');
		
		
		
		
		
		
		
		
		
		
		
		
		
		<!-- for (let key in countriesData) { -->
		  <!-- let option = document.createElement("option"); -->
		  <!-- option.setAttribute('value', data[key]); -->

		  <!-- let optionText = document.createTextNode(key); -->
		  <!-- option.appendChild(optionText); -->

		  <!-- countriesDropDown.appendChild(option); -->
		<!-- } -->
				
				
		
		
	</script>	
	
	
	
</body>